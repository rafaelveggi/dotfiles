#!/usr/bin/env bash

_dir=$(readlink -f .)
_shebang="#!$(command -v bash)"

{
    echo -e "$_shebang"
    echo
    grep -v "^#!" "$_dir/history"
    for script in \
    "prompt"      \
    "aliases"     \
    "keyboard"    \
    ; do
        echo "# shellcheck source=$_dir/$script"
        echo "source $_dir/$script"
    done
} > "bashrc"
chmod +x "$_dir/bashrc"
ln -fs "$_dir/bashrc" "${HOME}/.bashrc"

{
    echo -e "$_shebang"
    echo
    grep -v "^#!" "$_dir/vars"
    echo
    echo "# shellcheck source=${HOME}/.bashrc"
    echo source "${HOME}/.bashrc"
} > "bash_profile"
chmod +x "$_dir/bash_profile"
ln -fs "$_dir/bash_profile" "${HOME}/.bash_profile"

echo Done.

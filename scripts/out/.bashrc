#!/usr/bin/bash

### do not edit this file 
### it was generated via the /home/raf/proj/unix-stuff/bash/init script


### ././scripts/rc.bash

# If not running interactively, don't do anything
[[ $- != *i* ]] && return
### eo ././scripts/rc.bash

### ././scripts/history.bash

HISTSIZE=100000
HISTFILESIZE=200000
HISTCONTROL=ignoredups:ignorespace
HISTIGNORE="&:[ ]*:exit"

### eo ././scripts/history.bash

### ././scripts/ps1.bash

# PS1='[\u@\h \W]\$ '

function set_prompt_colors() {
  local color
  local reset="\[\e[0m\]"

  local status

  status="$(git status --porcelain -b 2>/dev/null)"

  if [ ! "$status" ]; then
    color="\[\e[1;96m\]" 
    PS1="${color}\u@\w\$${reset} "
    return
  fi

  case "$status" in
  *"behind"* | *"no branch"*)
    color="\[\e[1;41m\]" # red
    ;;
  *"ahead"* | *"M "* | *"A "* | *"?? "* | *"No commits yet on "*)
    color="\[\e[1;33m\]" # yellow
    ;;
  *)
    color="\[\e[1;32m\]" # green
    ;;
  esac

  PS1="\u@\h${color}[\w]${reset}\n\$ "
}

PROMPT_COMMAND="set_prompt_colors"
### eo ././scripts/ps1.bash

### ././scripts/aliases.bash

alias cat="bat"
alias dmesg="sudo dmesg"
alias l="ls -lhA "
alias ls="command ls --color=auto "
alias reboot="sudo reboot"
alias shutdown="sudo shutdown -h now"
alias updatedb="sudo updatedb"
alias vi="nvim"
alias x="startx"
alias rc="nvim ~/.bashrc; source ~/.bashrc"
alias rmf="rm -rf "
### eo ././scripts/aliases.bash

### ././scripts/sudo.bash

function sudo() {
  # replace vi for nvim for convenience, otherwise executes sudo as usual
  if [[ $1 == 'vi' ]]; then
    command sudo nvim "${@:2}"
  else
    command sudo "$@"
  fi
}
### eo ././scripts/sudo.bash

### ././scripts/xbps.bash

alias inst="sudo xbps-install --sync --yes "
alias update="sudo xbps-install --sync --update "
alias remove="sudo xbps-remove --clean-cache --remove-orphans "
alias search="xbps-query --regex --repository --search "

pkg-update() {
  dir=$(pwd)
  pkg="${1:-google-chrome}"
  cd ~/void-packages || exit
  git pull
  ./xbps-src pkg "$pkg"
  sudo xbps-install --repository hostdir/binpkgs/nonfree "$pkg"
  cd "$dir" || exit
}

updt() {
  ### TBD
  local to_update with_info
  to_update="$(
    xbps-install -Mun |
      awk '{print $1}' |
      awk '{printf "%s%s", (NR==1)?"(":"|", $0}; END{print ")"}'
  )"

  with_info="$(xbps-query --repository --regex --search "$to_update" | cut -d' ' -f2- )"
  echo "$with_info"

}
### eo ././scripts/xbps.bash

### ././scripts/runit.bash

svs() { sudo ln -s "$1" /var/service; }
### eo ././scripts/runit.bash

### ././scripts/git.bash

alias L="git log"
alias M="git commit --amend"
alias Ss="git status "
alias S="git status --porcelain -b "
alias A="git add -A"

function C() { git commit -m "$*"; }

function github-login() {
  local name email filename

  if [ "$#" -lt 3 ]; then
    echo "Usage: github-login <first name> <last name> <email>"
    return 1
  fi

  name="$1 $2"
  email="$3"
  filename="$(ls "$HOME"/.ssh/id_*_"${3%%@*}" 2>/dev/null)"
  if [ ! -e "$filename" ]; then
    echo "Error: Unknown user: ${name} email: ${email}"
    return 1
  fi

  eval "$(ssh-agent -s)"
  ssh-add "${filename}"

  git config --global user.name \""$name"\"
  git config --global user.email \""$email"\"
}
### eo ././scripts/git.bash

### ././scripts/webdev.bash

alias nrd="npm run dev"
alias nrs="npm run serve"
### eo ././scripts/webdev.bash

### ././scripts/qmk.bash

qmk-flash() { qmk flash -kb raferris -km default -bl avrdude; }
### eo ././scripts/qmk.bash

